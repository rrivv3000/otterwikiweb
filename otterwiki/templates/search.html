{# vim: set et ts=8 sts=4 sw=4 ai: #}
{% extends "wiki.html" %}
{% block navbarsearch %}
{# don't display two searchbars #}
{% endblock %}
{% block content %}
<div class="w-600 mw-full">
<div class="card">
  <h2 class="card-title">Søk</h2>
  <form action="{{url_for("search")}}" method="POST" class="form-inline">
  <div class="form-group">
    <input type="text" class="form-control" name="query" id="search-query" placeholder="Search term" value="{{query if query}}" autofocus onfocus="this.setSelectionRange(this.value.length,this.value.length);">
  </div>
{#
  <div class="form-group">
    <div class="form-text">
        <strong>Hint:</strong>&nbsp;Unngå forkortelser. Prøv å begrense navnet til tre eller færre enkle ord.
    </div>
  </div>
#}
  <div class="form-group">
  <div class="custom-checkbox d-inline-block mr-10">
    <input type="checkbox" id="is_casesensitive" name="is_casesensitive" value="y" {{"checked" if is_casesensitive}}>
    <label for="is_casesensitive">Skill mellom store og små bokstaver</label>
  </div>
  <div class="custom-checkbox d-inline-block mr-10">
    <input type="checkbox" id="regexp" name="is_regexp" value="y" {{"checked" if is_regexp}}>
    <label for="regexp">Regular expression</label>
  </div>
{#
  <div class="custom-checkbox d-inline-block">
    <input type="checkbox" id="in_history" name="in_history" value="y" {{"checked" if in_history}}>
    <label for="in_history">Søk i historikk</label>
  </div>
#}
  </div>
  <div class="form-group">
    <form action="/submit-page" method="post">
      <button type="submit" class="btn btn-primary" name="Search" value="Search">
        Søk
      </button>
    </form>
  </div>
</form>
</div>{# card #}
</div>{# w-600 container #}
{#
#}
{% if result %}
<h1 class="content-title">Søket ga treff på {{keys | length}} side{%if keys | length >1%}r{%endif%}:</h1>
{% for key in keys %}
<h2 class="content-title mt-20"><a href="{{ url_for('view', path=key[3]) }}">{{key[4]|safe}}</a>
{%- if key[0] == key[1] == 1 %}
(Sidenavn matcher)
{% elif key[0] == 1  %}
(Sidenavn og {{key[1] - 1}} treff{%if key[1] -1 != 1%}{%endif%} funnet)</h2>
{% else %}
({{key[1]}} teff{%if key[1]!=1%}{%endif%} funnet)</h2>
{% endif -%}
{% for match in result[key] %}
{%- if match -%}
<p>{{match|safe}}</p>
{%- endif -%}
{%- endfor -%}
{% endfor %}
{% else %}
<h1 class="content-title">Ingen søketreff.</h1>
{% endif %}
{% endblock %}
